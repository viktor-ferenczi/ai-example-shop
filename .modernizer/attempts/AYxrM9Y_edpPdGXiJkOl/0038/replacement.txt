using Microsoft.EntityFrameworkCore;
using Shop.Data;
using Shop.Data.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace Shop.Service
{
    public class FoodService : IFood
    {
        private readonly IFoodRepository _repository;

        public FoodService(IFoodRepository repository)
        {
            _repository = repository;
        }

        public void DeleteFood(int id)
        {
            var food = GetById(id);
            if (food == null)
            {
                throw new ArgumentException($"No food found with id: {id}");
            }
            _repository.DeleteFood(id);
        }

        public void EditFood(Food food)
        {
            _repository.EditFood(food);
        }

        public IEnumerable<Food> GetAll()
        {
            return _repository.GetAll();
        }

        public Food GetById(int id)
        {
            return _repository.GetById(id);
        }

        public IEnumerable<Food> GetFilteredFoods(int id, string searchQuery)
        {
            return _repository.GetFilteredFoods(id, searchQuery);
        }

        public IEnumerable<Food> GetFilteredFoods(string q)
        {
            return _repository.GetFilteredFoods(q);
        }

        public IEnumerable<Food> GetFoodsByCategoryId(int categoryId)
        {
            return _repository.GetFoodsByCategoryId(categoryId);
        }

        public IEnumerable<Food> GetPreferred(int count)
        {
            return _repository.GetPreferred(count);
        }

        public void NewFood(Food food)
        {
            _repository.NewFood(food);
        }
    }
}
